<!-- registerUser.ejs -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Usuário</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/styles.css">

    <style>
        .error-message {
            color: red;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>
    <div class="container mt-2">
        <!-- Formulário para registro de usuário -->
        <form id="userForm" action="/users/add" method="POST" onsubmit="return validateForm()">

            <h3>Dados pessoais</h3>
            <hr>

            <div class="form-group">
                <label for="name">Nome:</label>
                <input type="text" class="form-control" id="name" name="name" placeholder="Meu Nome">
                <div id="name-error" class="error-message"></div>
            </div>

            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" class="form-control" id="email" name="email" placeholder="Meu email" >
                <div id="email-error" class="error-message"></div>
            </div>

            <div class="form-row">
                <div class="form-group col-md-5">
                    <label for="inputCity">CPF:</label>
                    <input type="text" class="form-control" id="cpf" name="cpf" placeholder="000.000.000-00">
                    <div id="cpf-error" class="error-message"></div>
                </div>
                <div class="form-group col-md-4">
                    <label for="dob">Data de Nascimento:</label>
                    <input type="date" class="form-control" id="dob" name="dob" >
                </div>
                <div class="form-group col-md-2">
                    <label for="dob">Sexo:</label>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input position-static" type="radio" name="gender" id="genderF" value="Feminino" aria-label="..."> Feminino
                        <input class="form-check-input position-static" type="radio" name="gender" id="genderM" value="Masculino" aria-label="..."> Masculino
                    </div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group col-md-6">
                    <div class="form-group">
                        <label for="maritalStatus">Estado Civil:</label>
                        <select class="form-control" id="maritalStatus" name="maritalStatus" >
                            <option value="Solteiro(a)">Solteiro(a)</option>
                            <option value="Casado(a)">Casado(a)</option>
                            <option value="Separado(a)">Separado(a)</option>
                            <option value="Divorciado(a)">Divorciado(a)</option>
                            <option value="Viúvo(a)">Viúvo(a)</option>
                        </select>
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <div class="form-group">
                        <label for="monthlyIncome">Renda Mensal:</label>
                        <input type="text" class="form-control" id="monthlyIncome" name="monthlyIncome" placeholder="0.00">
                        <div id="monthlyIncome-error" class="error-message"></div>
                    </div>
                </div>
            </div>

            <h3>Endereço</h3>
            <hr>

            <div class="form-row">
                <div class="form-group col-md-6">
                    <div class="form-group">
                        <label for="address">Logradouro:</label>
                        <input type="text" class="form-control" id="address" name="address" placeholder="Av.Paulista">
                        <div id="address-error" class="error-message"></div>
                    </div>
                </div>
                <div class="form-group col-md-3">
                    <label for="number">Número:</label>
                    <input type="text" class="form-control" id="number" name="number" placeholder="N°">
                    <div id="number-error" class="error-message"></div>
                </div>
                <div class="form-group col-md-3">
                    <label for="complement">Complemento:</label>
                    <input type="text" class="form-control" id="complement" name="complement" placeholder="Casa, Apto, Loja">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group col-md-6">
                    <div class="form-group">
                        <label for="state">Estado:</label>
                        <select class="form-control" id="state" name="state" >
                            <option value="AC">Acre</option>
                            <option value="AL">Alagoas</option>
                            <option value="AP">Amapá</option>
                            <option value="AM">Amazonas</option>
                            <option value="BA">Bahia</option>
                            <option value="CE">Ceará</option>
                            <option value="ES">Espírito Santo</option>
                            <option value="GO">Goiás</option>
                            <option value="MA">Maranhão</option>
                            <option value="MT">Mato Grosso</option>
                            <option value="MS">Mato Grosso do Sul</option>
                            <option value="MG">Minas Gerais</option>
                            <option value="PA">Pará</option>
                            <option value="PB">Paraíba</option>
                            <option value="PR">Paraná</option>
                            <option value="PE">Pernambuco</option>
                            <option value="PI">Piauí</option>
                            <option value="RJ">Rio de Janeiro</option>
                            <option value="RN">Rio Grande do Norte</option>
                            <option value="RS">Rio Grande do Sul</option>
                            <option value="RO">Rondônia</option>
                            <option value="RR">Roraima</option>
                            <option value="SC">Santa Catarina</option>
                            <option value="SP">São Paulo</option>
                            <option value="SE">Sergipe</option>
                            <option value="TO">Tocantins</option>
                            <option value="DF">Distrito Federal</option>
                            
                        </select>
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <div class="form-group">
                        <label for="city">Cidade:</label>
                        <input type="text" class="form-control" id="city" name="city" placeholder="Maceió">
                        <div id="city-error" class="error-message"></div>
                    </div>
                </div>
            </div>

            <button type="submit" class="btn btn-primary">Enviar</button>

        </form>
    </div>

    <script>
        function validateForm() {
            let isValid = true;

            const nameInput = document.getElementById('name');
            const nameValue = nameInput.value.trim();
            const nameError = document.getElementById('name-error');
            if (nameValue === '') {
                nameError.textContent = 'Nome é obrigatório';
                isValid = false;
            } else {
                nameError.textContent = '';
            }

            const emailInput = document.getElementById('email');
            const emailValue = emailInput.value.trim();
            const emailError = document.getElementById('email-error');
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (emailValue === '') {
                emailError.textContent = 'Email é obrigatório';
                isValid = false;
            } else if (!emailRegex.test(emailValue)) {
                emailError.textContent = 'Formato de email inválido';
                isValid = false;
            } else {
                emailError.textContent = '';
            }

            const cpfInput = document.getElementById('cpf');
            const cpfValue = cpfInput.value.trim();
            const cpfError = document.getElementById('cpf-error');
            const cpfRegex = /^\d{11}$/;
            if (!cpfRegex.test(cpfValue)) {
                cpfError.textContent = 'CPF inválido';
                isValid = false;
            } else {
                cpfError.textContent = '';
            }

            const monthlyIncomeInput = document.getElementById('monthlyIncome');
            const monthlyIncomeValue = monthlyIncomeInput.value.trim();
            const monthlyIncomeError = document.getElementById('monthlyIncome-error');
            if (isNaN(monthlyIncomeValue) || parseFloat(monthlyIncomeValue) <= 0) {
                monthlyIncomeError.textContent = 'Renda mensal inválida';
                isValid = false;
            } else {
                monthlyIncomeError.textContent = '';
            }

            const addressInput = document.getElementById('address');
            const addressValue = addressInput.value.trim();
            const addressError = document.getElementById('address-error');
            if (addressValue.length < 3) {
                addressError.textContent = 'Logradouro deve ter no mínimo 3 caracteres';
                isValid = false;
            } else {
                addressError.textContent = '';
            }

            const numberInput = document.getElementById('number');
            const numberValue = numberInput.value.trim();
            const numberError = document.getElementById('number-error');
            if (isNaN(numberValue) || parseInt(numberValue) <= 0) {
                numberError.textContent = 'Número inválido';
                isValid = false;
            } else {
                numberError.textContent = '';
            }

            const cityInput = document.getElementById('city');
            const cityValue = cityInput.value.trim();
            const cityError = document.getElementById('city-error');
            if (cityValue.length < 3) {
                cityError.textContent = 'Cidade deve ter no mínimo 3 caracteres';
                isValid = false;
            } else {
                cityError.textContent = '';
            }

            return isValid;
        }
        
    </script>
</body>
</html>
